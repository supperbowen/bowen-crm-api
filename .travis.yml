language: node_js
addons:
  ssh_known_hosts: 123.207.14.113
  apt:
    packages:
    - sshpass
node_js:
- stable
sudo: false
script:
- npm run build
before_install:
- openssl aes-256-cbc -K $encrypted_bd0bd10cde91_key -iv $encrypted_bd0bd10cde91_iv
  -in id_rsa.enc -out ~/.ssh/id_rsa -d
- chmod 600 ~/.ssh/id_rsa
- echo -e "Host 123.207.14.113\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
after_success:
- export SSHPASS=$pwd
- sshpass -e scp ./deploy_api.sh $host:/usr/local/source/distss/
- sshpass -e ssh $host 'cd /usr/local/source/distss && sh deploy_api.sh'
env:
  global:
  - secure: TBr+qOVQwmIv0E5PdiK9ktnSqfq9olmzjnDZaVFaaHDyWJ+uc3pGj/1VSPqlpLM5ebBKfG5zwBUF/SOwgVfe7EJbgTcYis7+iadV3vWfVJ9ls+/YhmyFOXPqAxHtOcLlQuYyN5RX0u+bc8r3tpVg1LBj5SUWQTOk1iS8uVw88UAF3KAFiYNLOc0MS1+QNHxVcmq/ssPpRGHG068uXN0wkh/3ZkZDaeb9o7qPWZP5QvKOo9xopiy6nPk6bAfxED6fJD4Bi1p5ONTDWYqoGEACi5pONI6h3b6j5mX01wndHPtMVNrmgpCtUVdqWnYX+x1YzybZGKcXMJBCFdTNBt2O9Ztn7R51n6aPEyQq4bsztWy7fn46C+UVX2QcqH++3DVf6YgDkjIWHqmhDwBgag5w5TPoSnhmDdC3DUE46DGxvu7xXMfdAYxichAYQAHxHBEzVWusH1aFJQkLTuEoBsxeHQ/RSZBxTD19KmPCIYKJCdNEZOXz0hXU7kb5TGCKvTLjcMOrOCErxup/fXxUMmfMqvMAr5ztufX4rouYKl58IWRwpW1EaMzwrhOBSNmKf7SrAqqeABJs1aRN5LNfGAcMeB49Mz/AKnJEYUlIcY3GirnyYvrp1ZHqQkPOQd8X18RS8aCXWR7GG7ZtqIGQKWGux/Nw0bMzj4HBELTByArbS3k=
  - secure: US/OMOH1+sdBi755V1H100lZLAybCCKEKDq87eQtwHDByHZmjRhqecNdkUfhFKRng+cX0C2XeHUU11xJhPlFHZ5oR0QiX+SmW6qs1nLmmb0jfrDhOojiiIibYzQuPX3UXZj3cb5uUWr8haiULdxbH7/NXiAlJJNMfL1WK6b6jiz3CilW2+O1fwlhjAc6sYd1I0SNmbWEPzNfNcYu4NbYONzjvUz1P8KYcmR9T46aMZMnCpZ+NtkUY91bM06zZp57Ehdh4xzxa2o/nl2atXPQMRiUN/kzyUX7b9IQa7lSq0gTOwJP7In3O4xG5dQh8e2hAxRd0ADP2jls6auiZuFFDaSagTWgHdqIGJ28zfkGyehxrwqIctE+62TIz3Cm0mLedU5AkUaUl8gM2Rfy3wzHBhy+m2W1yehInwbAJyxmtvivO6GE6XjzIT4xWWCXoQ23o20ArLwTHCjhnYZ9xt0hqXac4lZKEIjPxadOtysg+zW03NObum+7dMQqOzQXcH6GpqGZKcuULow9RNphnWbKlm6HDkcF0FQYHzYrQr5gI1wjuj07BDb5xL5Rk8ACG/bFwKJy1ejxeAJPlvJgDNnbMuD0gWOZbdI2edxnm5FcVpfDiGuefZoRiH6t+y4Thp23cTiTkfN1D4Nbtq/q4UfQxU6vWWgEzx+XDt6AWbcUM4k=
